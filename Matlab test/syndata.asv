databyte = data;

start = find(databyte > 0, 1);
syncData = databyte(start:end-(5-start));

syncData16 = typecast(syncData, 'uint16');

blocksize = length(syncData);

byte3 = syncData(1:4:end);
byte2 = syncData(2:4:end);
byte1 = syncData(3:4:end);
byte0 = syncData(4:4:end);


cha_d = bitget(byte1, 7);
chb_d = bitget(byte3, 7);

Mask_Ana(1:blocksize/4,1) = uint8(63);

cha_a_l = bitand(byte0, Mask_Ana);
cha_a_h = bitand(byte1, Mask_Ana);
chb_a_l = bitand(byte2, Mask_Ana);
chb_a_h = bitand(byte3, Mask_Ana);

t = 1:blocksize/4;

cha_a = uint16(cha_a_h*64 + cha_a_l);
chb_a = uint16(chb_a_h*64 + chb_a_l);

plot(t, chb_a, t, chb_a);
